(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,28124,e=>{"use strict";e.i(89308);var t=e.i(75954);async function a(e){let a=await t.PDFDocument.create(),n=e.length;for(let o=0;o<e.length;o++){i(o/n*90,`Processing file ${o+1} of ${n}...`);let s=await t.PDFDocument.load(e[o],{ignoreEncryption:!0});(await a.copyPages(s,s.getPageIndices())).forEach(e=>a.addPage(e))}i(95,"Finalizing PDF...");let o=await a.save();i(100,"Complete!");let s=o.buffer;self.postMessage({type:"SUCCESS",data:s,pageCount:a.getPageCount()},{transfer:[s]})}async function n(e,a){let n=await t.PDFDocument.load(e,{ignoreEncryption:!0}),o=[];for(let e=0;e<a.length;e++){i(e/a.length*90,`Creating split ${e+1} of ${a.length}...`);let s=await t.PDFDocument.create(),l=a[e].map(e=>e-1).filter(e=>e>=0&&e<n.getPageCount());(await s.copyPages(n,l)).forEach(e=>s.addPage(e));let r=await s.save();o.push(r.buffer)}i(100,"Complete!"),self.postMessage({type:"SUCCESS",data:o[0],pageCount:a[0].length},{transfer:o})}async function o(e,a){i(10,"Loading PDF...");let n=await t.PDFDocument.load(e,{ignoreEncryption:!0});i(30,"Analyzing document structure...");let o=n.getPages();for(let e=0;e<o.length;e++)i(30+e/o.length*50,`Optimizing page ${e+1} of ${o.length}...`);i(85,"Rebuilding PDF structure...");let s=await n.save({useObjectStreams:!0,addDefaultPage:!1});i(100,"Complete!");let l=s.buffer;self.postMessage({type:"SUCCESS",data:l,pageCount:o.length},{transfer:[l]})}async function s(e){let a=await t.PDFDocument.load(e,{ignoreEncryption:!0});self.postMessage({type:"INFO",pageCount:a.getPageCount(),title:a.getTitle(),author:a.getAuthor()})}function i(e,t){self.postMessage({type:"PROGRESS",progress:e,message:t})}self.onmessage=async e=>{let{type:t}=e.data;try{switch(t){case"MERGE":await a(e.data.files);break;case"SPLIT":await n(e.data.file,e.data.pageRanges);break;case"COMPRESS":await o(e.data.file,e.data.quality);break;case"GET_INFO":await s(e.data.file);break;default:throw Error(`Unknown message type: ${t}`)}}catch(t){let e=t instanceof Error?t.message:"Unknown error";self.postMessage({type:"ERROR",error:e})}},e.s([])}]);